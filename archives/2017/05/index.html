<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    Archive: 2017/5
  
</title>

<meta property="og:type" content="website">
<meta property="og:title" content="郎雪的博客">
<meta property="og:url" content="http://yoursite.com/archives/2017/05/index.html">
<meta property="og:site_name" content="郎雪的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="郎雪的博客">


  <link rel="alternative" href="/atom.xml" title="郎雪的博客" type="application/atom+xml">



  <link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">
<link rel="stylesheet" href="/styles/main.css">






</head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">郎雪的博客</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">郎雪的博客</a></h1>
    
    <div class="info">
      <div class="content">
        
        
          <div class="author">郎雪</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="https://cn.gravatar.com/avatar/35fef74d731255cd569c2c2b0b9e87e4?s=200"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">Category</a>
                
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">Tag</a>
                
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">Archive</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">4</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="Homepage">Homepage</a>
              </li>
            
          
            
              <li>
                <a href="/archives" title="By Year">By Year</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="https://github.com/denjones/hexo-theme-chan" title="Chan" target="_blank" rel="external">Chan</a>
              </li>
            
          
            
              <li>
                <a href="https://github.com/denjones" title="Github" target="_blank" rel="external">Github</a>
              </li>
            
          
            
              <li>
                <a href="/atom.xml" title="RSS">RSS</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          

  
  
    
      
      
      <section class="archives-wrap">
        <div class="archive-year-wrap">
          <h1><a href="/archives/2017" class="archive-year">2017</a></h1>
        </div>
        <div class="post-list">
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2017/05/11/移动端开发细节/" >
  移动端开发细节
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2017/05/11/移动端开发细节/"><span class="article-date">
  2017-05-11
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <a id="more"></a>
<h2 id="1-移动web开发"><a href="#1-移动web开发" class="headerlink" title="1. 移动web开发"></a>1. 移动web开发</h2><pre><code>1. 移动web开发:web页面在移动端
</code></pre><h2 id="2-访问方式"><a href="#2-访问方式" class="headerlink" title="2. 访问方式"></a>2. 访问方式</h2><pre><code>2. 访问方式: ① 直接在手机端的浏览器访问页面
            ② 嵌入app中的页面
</code></pre><h2 id="3-移动站布局方案"><a href="#3-移动站布局方案" class="headerlink" title="3. 移动站布局方案:"></a>3. 移动站布局方案:</h2><h3 id="1-宽高自适应"><a href="#1-宽高自适应" class="headerlink" title="1. 宽高自适应"></a>1. 宽高自适应</h3><pre><code>1. 宽高自适应:定高    宽度自适应(width:100%),要设padding box-sizing;一些装饰性的元素高度固定,内容不需固定高度
</code></pre><h3 id="2-响应式web开发"><a href="#2-响应式web开发" class="headerlink" title="2. 响应式web开发"></a>2. 响应式web开发</h3><pre><code>1. 响应式web开发:全设备的适配 采用了流式布局,媒体查询,液态图片三项技术
</code></pre><h3 id="3-rem"><a href="#3-rem" class="headerlink" title="3.  rem"></a>3.  rem</h3><pre><code>1. 使用默认的文字大小,元素本身的文字大小修改,并不会改变大小,只改变文字大小,相对的是html字体大小
2. 依托&quot;比&quot;特性:用rem做布局,把大的设计图放在小的屏幕,为不同屏幕设不同的font-size,等比例缩放,大图计算font-size=屏幕宽/好算的值px,把px--&gt;rem,(例:width:100/font-size rem;)
3. 在媒体查询中,将html设置font-size=屏幕宽/好算的值
4. 补充小知识点:em的基本使用:根据文字大小,没设置,根据浏览器默认值,设置,根据元素设置值
</code></pre><h2 id="4-移动浏览器"><a href="#4-移动浏览器" class="headerlink" title="4. 移动浏览器:"></a>4. 移动浏览器:</h2><pre><code>① 国产主流浏览器:内核 webkit
② 移动端浏览器更新频率高,兼容性好
③ 移动端的设备发展趋势:屏幕越来越大(要考虑分辨率的问题),目前主流最小屏幕宽度320px
</code></pre><h2 id="5-webkit内核中一些私有的meta标签"><a href="#5-webkit内核中一些私有的meta标签" class="headerlink" title="5. webkit内核中一些私有的meta标签"></a>5. webkit内核中一些私有的meta标签</h2><pre><code>① 设置视口属性
    &lt;meta content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0,  user-scalable=0;&quot; name=&quot;viewport&quot; /&gt;
② 是iphone设备中的safari私有的meta标签,表示:允许全屏模式浏览
    &lt;meta content=&quot;yes” name=&quot; apple-mobile-web-app-capable&quot; /&gt;
③ 是iphone的私有标签,指定iphone中safari顶端的状态条的样式
    &lt;meta content=&quot;black&quot; name=&quot; apple-mobile-web-app-status-bar-style&quot;/&gt;
④ 告诉设备忽略将页面中的数字识别为电话号码
    &lt;meta content=&quot;telephone=no&quot; name=&quot;format-detection&quot; /&gt;
</code></pre><h2 id="6-移动web测试"><a href="#6-移动web测试" class="headerlink" title="6. 移动web测试"></a>6. 移动web测试</h2><pre><code>① 真机测试 ② 模拟环境测试
</code></pre><h2 id="7-视口属性—开发中首先设置"><a href="#7-视口属性—开发中首先设置" class="headerlink" title="7. 视口属性—开发中首先设置"></a>7. 视口属性—开发中首先设置</h2><pre><code>1. viewport属性: 仅移动端有的属性, emmet语法: meta:vp 做移动端要开启视口属性
    写法①: &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0&quot; /&gt;
    写法②: &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot; /&gt;
2. 视口属性目的: 让移动的页面布局基于设备的宽度布局
3. 视口属性支持设置的属性: 
    ① name=viewport 固定写法,只在移动端能被识别,谷歌浏览器的测试页面也能识别
    ② width=device-width 支持设置内容宽度为设备的物理宽度,也支持320px,若设置了固定值,就无法实现全设备适配
    ③ user-scalable 用户是否可进行缩放,可以开启(true),禁用缩放(false/no)
    ④ initial-scale 初始的缩放值,一般设置1.0即可
    ⑤ minimum-scale 最小的缩放值(为了保证缩放之后的显示效果,无法缩放到更小的值),1.0位临界点
    ⑥ maximum-scale 最大的缩放值 最大的缩放
</code></pre><h2 id="8-响应式web开发"><a href="#8-响应式web开发" class="headerlink" title="8. 响应式web开发"></a>8. 响应式web开发</h2><pre><code>1. 响应式:针对任意设备(不只是针对移动端),网页内容进行完美布局的一种显示机制,影响网页布局的因素:宽度
    ① 要能检测出是什么设备,检测设备的宽度:js或css3的媒体查询,
    ② 让网页内容在当前设备下完美显示:在不同屏幕下,给同一盒子加载不同css样式,使用css3的媒体查询技术,检测当前设备的宽度,在不同的设备宽度下,给网页加载不同的css样式,使网页适配于当前屏幕
</code></pre><h3 id="1-响应式web开发—媒体查询"><a href="#1-响应式web开发—媒体查询" class="headerlink" title="1. 响应式web开发—媒体查询"></a>1. 响应式web开发—媒体查询</h3><pre><code>1. 媒体查询:为了减少http请求,为了响应式布局,在css样式表中进行媒体查询,而不是在head中使用link进行家长在
2. 格式: @media screen and (查询条件){样式}
        {}:大括号内书写样式
    例: @media screen and (max-width:960px){}
        设备屏幕宽度和视口宽度同时满足最大不超过960px,才会调用{}中的样式
3. @media screen 遵循层级样式表,如果样式冲突,后面的样式会覆盖前面的样式
    满足屏幕宽度和视口宽度同时满足最大不超过960px,调用大括号样式
4. 多个媒体查询用and连接
</code></pre><h3 id="2-响应式web开发—流式布局"><a href="#2-响应式web开发—流式布局" class="headerlink" title="2. 响应式web开发—流式布局"></a>2. 响应式web开发—流式布局</h3><pre><code>1. 流式布局以百分比进行布局。重要:关注元素的父级层
2. 流式布局的应用是为了和媒体查询完美的结合使用
</code></pre><h3 id="3-响应式web开发—液态图片"><a href="#3-响应式web开发—液态图片" class="headerlink" title="3. 响应式web开发—液态图片"></a>3. 响应式web开发—液态图片</h3><pre><code>1. 要实现液态图片,需加入代码:img{max-width:100%}
</code></pre><h2 id="9-border-box-box-sizing"><a href="#9-border-box-box-sizing" class="headerlink" title="9. border-box : box-sizing"></a>9. border-box : box-sizing</h2><pre><code>1. border-box : box-sizing  一般设置在base.css中
2. border-box　：box-sizing  保证元素自身的尺寸不变,盒子尺寸就是宽度和高度,添加的padding,border,会通过压缩内容的方式来设置盒子大小
</code></pre><h2 id="10-高亮效果"><a href="#10-高亮效果" class="headerlink" title="10. 高亮效果"></a>10. 高亮效果</h2><pre><code>1. 移动端独有的高亮效果,webkit内核才有:-webkit-tap-hightlight-color:颜色;如果去掉一般设置为透明
2. transparent  直接设置为透明  -webkit-tap-highlight-color: transparent;
3. *号无法获取到伪元素,所以初始化时要给伪元素单独设置border-box: box-sizing
4. -webkit-appearance:none;  有部分浏览器会默认为input添加3d渲染效果,高光3d渐变,所以通过此方式去掉
</code></pre><h2 id="11-css预处理程序"><a href="#11-css预处理程序" class="headerlink" title="11. css预处理程序"></a>11. css预处理程序</h2><h3 id="1-less"><a href="#1-less" class="headerlink" title="1. less"></a>1. less</h3><pre><code>1. less: 是css预处理程序,写的时候文件后缀名为.less,项目上线要转为.css文件
2. 注释:若在less中写//,在编译为css文件后看不到注释;若写/**/,编译为css文件可以看到
3. 定义变量: 用@,(例如:@jsred:rgb(100,200,135));编译为css文件后,颜色会编译为16进制
4. 嵌套写法: 可在一个标签中写另一个标签,编译为css文件直接会以后代选择器方式显示设置样式
5. 伪元素: 清除空格,在伪元素前加&amp;
6. 设置颜色: 把设置颜色工具写在一个div的less中,css中就把该div设置了该样式
7. 运算支持: 在外面定义的变量,如:@jdred:rbg(100,200,135), 在后面需要的地方直接设置@jdred即可
8. 通栏部分添加固定定位后,需设固定宽度 width:100%
9. 混入写法: 定义一个类,在另一个类中写入这个类
</code></pre><h3 id="2-sass"><a href="#2-sass" class="headerlink" title="2. sass"></a>2. sass</h3><pre><code>1. css预处理程序
2. 定义变量: 用$
3. 支持数学运算
4. 支持混入写法:在类名前用一个关键字@mixin,在另一个类中医用,用关键字@include
</code></pre><h2 id="12-最大-amp-最小宽高"><a href="#12-最大-amp-最小宽高" class="headerlink" title="12. 最大&amp;最小宽高"></a>12. 最大&amp;最小宽高</h2><h3 id="1-最大宽高"><a href="#1-最大宽高" class="headerlink" title="1. 最大宽高"></a>1. 最大宽高</h3><pre><code>1. 最大宽:max-width;最大高:max-height;设置最大尺寸的宽度和高度,移动设备一般尺寸不设置,要么设640px,要么设750px。
</code></pre><h3 id="2-最小宽高"><a href="#2-最小宽高" class="headerlink" title="2. 最小宽高"></a>2. 最小宽高</h3><pre><code>1. 最小宽min-width; 最小高min-height; 设置最小尺寸的宽度和高度
2. 约束网页最小宽度,保证显示效果,只设min-width默认与父元素同宽,压缩小于这个值会出现滚动条
</code></pre><h3 id="3-目前移动设备"><a href="#3-目前移动设备" class="headerlink" title="3. 目前移动设备"></a>3. 目前移动设备</h3><pre><code>1. 目前移动设备,主流最小宽度为320px,最大尺寸一般为640px/750px
2. 可设置min-width:320px, 可变大,为body设置即可
</code></pre><h2 id="13-元素设置了fixed"><a href="#13-元素设置了fixed" class="headerlink" title="13. 元素设置了fixed"></a>13. 元素设置了fixed</h2><pre><code>1. 元素设置了fixed,相对的是设备的尺寸,(如:导航栏),故要单独设置min-width
</code></pre><h2 id="14-目前手机屏幕"><a href="#14-目前手机屏幕" class="headerlink" title="14. 目前手机屏幕"></a>14. 目前手机屏幕</h2><h3 id="1-普通屏"><a href="#1-普通屏" class="headerlink" title="1. 普通屏"></a>1. 普通屏</h3><pre><code>1. 屏幕宽度跟屏幕的分辨率一直,低端机/入门机
</code></pre><h3 id="2-视网膜屏幕"><a href="#2-视网膜屏幕" class="headerlink" title="2. 视网膜屏幕"></a>2. 视网膜屏幕</h3><pre><code>1. 使用更多的像素显示元素,分辨率大到一定程度就是视网膜屏
</code></pre><h3 id="3-分辨率"><a href="#3-分辨率" class="headerlink" title="3. 分辨率:"></a>3. 分辨率:</h3><pre><code>1. 分辨率:值得是屏幕组成的像素点
2. 例:1366*768=宽度1366个像素点,高度768个像素点
</code></pre><h3 id="4-如何实现不同设备加载不同图片"><a href="#4-如何实现不同设备加载不同图片" class="headerlink" title="4. 如何实现不同设备加载不同图片"></a>4. 如何实现不同设备加载不同图片</h3><pre><code>1. 判断设备是否是视网膜屏幕,如果是普通屏,加载普通图片,是视网膜屏幕,加载高清图片;
2. 设备为背景图片background:如果不设置图片的大小,默认为图片的原默认大小,所以要设置图片的Size属性,可以把background设置单独类,压缩图片尺寸:background-size
</code></pre><h4 id="1-2x图"><a href="#1-2x图" class="headerlink" title="1. 2x图"></a>1. 2x图</h4><p>)</p>
<h3 id="5-switch-case"><a href="#5-switch-case" class="headerlink" title="5. switch-case"></a>5. switch-case</h3><pre><code>1. 用switch-case获取屏幕比例
</code></pre><h3 id="5-window-devicePixelRatio浏览器的像素比例"><a href="#5-window-devicePixelRatio浏览器的像素比例" class="headerlink" title="5. window.devicePixelRatio浏览器的像素比例"></a>5. window.devicePixelRatio浏览器的像素比例</h3><pre><code>1. 浏览器的一个属性
</code></pre><h3 id="4-iphone"><a href="#4-iphone" class="headerlink" title="4. iphone"></a>4. iphone</h3><pre><code>1. iphone 3gs 普通屏幕
2. iphone 4 4s 5 5s 6 6s 7 都是 2x屏幕
3. iphone 6plus 6splus 7plus 都是 3x关系
4. 一般会准备2x跟3x的图片,1x的图片直接使用大图压小即可
</code></pre><h2 id="15-移动端的事件"><a href="#15-移动端的事件" class="headerlink" title="15. 移动端的事件"></a>15. 移动端的事件</h2><pre><code>1. 移动端的事件只有触屏设备才能出发,电脑端测试,谷歌切换到移动端,鼠标点操作
</code></pre><h3 id="1-touch事件"><a href="#1-touch事件" class="headerlink" title="1. touch事件"></a>1. touch事件</h3><pre><code>1. 用addEventListner来绑定 touchstart touchmove touchend
2. touchstart和touchmove绑定,传入事件参数e,获取触碰(/鼠标点击)和手指移动(/鼠标移动)的x坐标和y坐标,e.touches[0].clientX;原点在屏幕的左上角
3. touchend事件,不能获取到坐标
4. 用jQuery绑定touch事件:$(&quot;body&quot;).on(&quot;touchstart&quot;,function(e){})
5. touch事件无法触发的问题:① 没有切换到移动端界面 ② 5.5的谷歌浏览器,url中输入chrome://flags/ --&gt;指针活动--&gt;调成已停用--&gt;重启浏览器
</code></pre><h3 id="2-点击事件"><a href="#2-点击事件" class="headerlink" title="2. 点击事件"></a>2. 点击事件</h3><pre><code>1. 移动端的点击事件,延迟300毫秒,早期点击事件和双击放大事件冲突,所以延迟300毫秒解决操作来这个问题
2. 那么我们现在做的话,解决办法
    ① 通过touch事件,touch事件比click事件早完成,触摸就感觉是立即触发的,
    ② 为页面添加视口属性,就认为是专门的移动站,仍比touch事件慢
3. 所以: 移动端的点击事件,利用touch事件执行时机比click早的原理,封装tap事件
</code></pre><h3 id="3-封装tap事件"><a href="#3-封装tap事件" class="headerlink" title="3. 封装tap事件"></a>3. 封装tap事件</h3><pre><code>// 想要使用touch的三个事件来封装一个叫做tap的轻敲事件
// 需要满足 如下 三个条件
// 用户手指放上去停留很久不用触发
var startTime = 0;
// 用户手指放上去移动了不用触发
var isMove =false;
// 用户手指放上去不移动很快松开才触发
document.body.addEventListener(&apos;touchstart&apos;,function(){
    startTime = Date.now();
    // 每次触摸开始的时候都将isMove重置为false
    isMove = false;
})
document.body.addEventListener(&apos;touchmove&apos;,function(){
    console.log(&apos;移动了&apos;);
    isMove =true;
})
document.body.addEventListener(&apos;touchend&apos;,function(){
    var delayTime = Date.now() - startTime;
    if(delayTime&gt;=120){
        console.log(&apos;时间太长了 不满足条件&apos;);
        return;
    }
    if(isMove == true){
        console.log(&apos;移动了 不满足条件了&apos;);
        return;
    }
    //如果时间很短并且没有移动满足所有条件可以触发
    console.log(&apos;时间很短,并且 没有移动 触发 tap事件&apos;);
})
</code></pre><h2 id="16-带鱼屏"><a href="#16-带鱼屏" class="headerlink" title="16. 带鱼屏"></a>16. 带鱼屏</h2><pre><code>1. 约束版心,屏幕尺寸1366*768,最大尺寸为3
2. 专业用户
</code></pre><h2 id="17-zepto"><a href="#17-zepto" class="headerlink" title="17. zepto"></a>17. zepto</h2><pre><code>1. 移动端的js库(移动端的jQ)
2. 因为jQ集成的代码太多,就剔除了将jQ的代码分为不同的模块,可以根据需要导入不同的模块,鉴于这个需求,就有人重新封装了一个js库,专门用于移动端
3. 使用:
    ① 使用之前,要导入zepto的核心模块zepto.js
    &lt;script src=&quot;js/zepto/zepto.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
    ② 移动端用到了事件模块,所以要导入事件模块event.js
    &lt;script src=&quot;js/zepto/event.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
    移动端也有touch模块,但是导入touch模块,桌面端无法使用,所以绑定事件可以导入事件模块
    ③ 用到了动画模块,就导入动画模块,内部是使用过渡实现的
    &lt;script src=&quot;js/zepto/fx.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
4. zepto为元素绑定多个事件,-可写上,也可省略,对象形式也一样
5. 注意:touch无法触发的问题:
</code></pre><h2 id="18-iScroll"><a href="#18-iScroll" class="headerlink" title="18. iScroll"></a>18. iScroll</h2><pre><code>1. 滚动的元素需要放在一个容器中,调用IScroll方法事件滚动
&lt;script src=&quot;js/iscroll/iscroll.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
var myScroll=new IScroll(&quot;#wrapper&quot;);
</code></pre><h2 id="19-swiper"><a href="#19-swiper" class="headerlink" title="19. swiper"></a>19. swiper</h2><pre><code>1. 滑动轮播图
&lt;script src=&quot;js/swiper/swiper.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
var swiper=new Swiper(){
  loop: true,
  autoplay :2000
}
</code></pre><h2 id="开发中注意"><a href="#开发中注意" class="headerlink" title="开发中注意"></a>开发中注意</h2><pre><code>1. 移动端不建议用弹性布局,因为弹性布局在UC浏览器不支持
2. 宽高: 宽度: 一般跟屏幕一致,不让用户在水平方向上移动
              高度: 不限制
1. 项目中遇到内容排列显示的布局,建议使用:display : block
2. 保证将每条数据都放在一个a标签中,为了在触屏手机上,为提升用户体验,尽可能保证用户的可点击区域较大
3. 学会使用webkit-box:这个是webkit为display属性提供的值,可以灵活控制盒子模型
4. 如何去除Android平台中邮箱地址的识别:IOS webapp API中IOS提供了一个meta标签,用于禁用ios对页面电话号码的自动识别。在ios中是不自动识别邮箱地址的。但在Android平台会自动检测邮箱地址,当用户touch到这个邮箱地址时,Android会弹出一个框提示用户发送邮件,如果你不想Android自动识别页面中的邮箱地址,可以加上meta标签:&lt;meta content=&quot;email=no&quot; name=&quot;format-detection&quot; /&gt;
5. 如何去除ios和Android中的输入URL的控件条:在window.onload中设置setTimeout(scrollTo,0,0,0);且当前文档的内容高度必须是高于窗口的高度时,这句代码才有效执行
6. 如何检测用户是通过主屏启动的webapp : 设置navigator.standalone为true。原因:从主屏启动的webapp和浏览器访问webapp最大的区别是它清除了浏览器上方和下放的工具条,这样的Webapp更加想nativeapp了,另外区别,window对象中的nacigator子对象的一个standalone属性。在Android中没有添加到主屏这回事
7. 如何关闭ios中键盘自动大写:input元素中设置autocapitalize=&quot;off&quot;
</code></pre>
        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2017/05/11/事件DOMContentLoaded和load的区别/" >
  事件DOMContentLoaded和load的区别
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2017/05/11/事件DOMContentLoaded和load的区别/"><span class="article-date">
  2017-05-11
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <a id="more"></a>
<h3 id="他们的区别是，触发的时机不一样，先触发DOMContentLoaded事件，后触发load事件。"><a href="#他们的区别是，触发的时机不一样，先触发DOMContentLoaded事件，后触发load事件。" class="headerlink" title="他们的区别是，触发的时机不一样，先触发DOMContentLoaded事件，后触发load事件。"></a>他们的区别是，触发的时机不一样，先触发DOMContentLoaded事件，后触发load事件。</h3><p>DOM文档加载的步骤为:</p>
<ol>
<li>解析HTML结构。</li>
<li>加载外部脚本和样式表文件。</li>
<li>解析并执行脚本代码。</li>
<li>DOM树构建完成。//DOMContentLoaded</li>
<li>加载图片等外部文件。</li>
<li>页面加载完毕。//load</li>
<li>在第4步，会触发DOMContentLoaded事件。在第6步，触发load事件。<h3 id="原生写法"><a href="#原生写法" class="headerlink" title="原生写法"></a>原生写法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//不兼容老的浏览器</span></div><div class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'DOContentLoaded'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//代码</span></div><div class="line">&#125;,<span class="literal">false</span>);</div><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//代码</span></div><div class="line">&#125;，<span class="literal">false</span>)</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="JQ的写法"><a href="#JQ的写法" class="headerlink" title="JQ的写法"></a>JQ的写法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">	<span class="comment">//DOMContentLoaded</span></div><div class="line">	$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="comment">//代码</span></div><div class="line">	&#125;);</div><div class="line">	<span class="comment">//load</span></div><div class="line">	$(<span class="built_in">document</span>).load(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="comment">//代码</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2017/05/11/项目构建工具gulp/" >
  项目构建工具gulp
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2017/05/11/项目构建工具gulp/"><span class="article-date">
  2017-05-11
</span>
</a>
        

        

      </div>
      <div class="article-entry">
        
          <a id="more"></a>
<h2 id="Gulp-Tutorial"><a href="#Gulp-Tutorial" class="headerlink" title="Gulp Tutorial"></a>Gulp Tutorial</h2><blockquote>
<p>Gulp: The streaming build system</p>
</blockquote>
<p><img src="img/Speed-up-your-workflow-with-a-Gulp-plugin.png" alt="gulp-logo"></p>
<p>gulp是前端开发过程中一种基于流的代码构建工具，是自动化项目的构建利器；<br>她不仅能对网站资源进行优化，而且在开发过程中很多重复的任务能够使用正确的工具自动完成；<br>使用她，不仅可以很愉快的编写代码，而且大大提高我们的工作效率。</p>
<p>项目构建是指项目上线之前对项目源代码进行一系列处理，使其以最佳的形式运行于线上服务器。<br>常见处理任包括以下几方面：</p>
<ol>
<li>模块化开发可以实现功能的复用并解决模块间的依赖关系，但带来好处的同时也使得功能代码的碎片化（若干文件）程度增加。</li>
<li>使用less、sass等预处理器，可以降低CSS的维护成本，最终需要将这些预处理器编译成css文件；</li>
<li>对静态资源（css、js、html、images）压缩合并可以提升网页打开速度，提高性能；</li>
</ol>
<p>以上任务完如果完全靠手动来完成是非常耗时耗力的且容易出错，实际开发通常借助构建工具来实现。<br>所谓构建工具是指通过一系简单配置就可以帮我们实现合并、压缩、校验、预处理等一系列任务的软件工具。<br>常见的构建工具包括：<code>Grunt、Gulp、F.I.S（百度出品）、webpack</code>等。</p>
<p>Gulp是基于Nodejs开发的一个构建工具，借助gulp插件可以实现不同的构建任务，<br>其以简洁的配置和卓越的性能成为目前主流的构建工具。</p>
<p><img src="img/150046-20160308200954022-1598623728.jpg" alt="gulp-task"></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><ul>
<li>官方：<a href="http://gulpjs.com/" target="_blank" rel="external">http://gulpjs.com/</a></li>
<li>中文官网：<a href="http://www.gulpjs.com.cn/" target="_blank" rel="external">http://www.gulpjs.com.cn/</a></li>
<li>npm：<a href="https://www.npmjs.com/package/gulp" target="_blank" rel="external">https://www.npmjs.com/package/gulp</a></li>
<li>Github：<a href="https://github.com/gulpjs/gulp" target="_blank" rel="external">https://github.com/gulpjs/gulp</a></li>
<li>Gitbook：<a href="https://wizardforcel.gitbooks.io/gulp-doc/content/2.html" target="_blank" rel="external">https://wizardforcel.gitbooks.io/gulp-doc/content/2.html</a></li>
</ul>
<hr>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><blockquote>
<p>官方文档：<a href="https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md" target="_blank" rel="external">https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md</a></p>
</blockquote>
<p>一：Install the gulp command</p>
<p>在项目中使用 gulp 首先需要确保全局有 gulp-cli 环境，如果有就不需要执行下面的命令了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># npm install --global gulp-cli</span></div><div class="line">yarn global add gulp-cli</div></pre></td></tr></table></figure>
<p>二：Install gulp in your devDependencies</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># npm install --save-dev gulp</span></div><div class="line">yarn add -D gulp</div></pre></td></tr></table></figure>
<p>三：Create a file called gulpfile.js in your project root with these contents:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var gulp = require(<span class="string">'gulp'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">  console.log(<span class="string">'hello gulp'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>四：Test it out: Run the gulp command in your project directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp</div></pre></td></tr></table></figure>
<hr>
<h2 id="API-Documentation"><a href="#API-Documentation" class="headerlink" title="API Documentation"></a>API Documentation</h2><blockquote>
<p>官方文档：<a href="https://github.com/gulpjs/gulp/blob/master/docs/API.md" target="_blank" rel="external">https://github.com/gulpjs/gulp/blob/master/docs/API.md</a></p>
</blockquote>
<ul>
<li>gulp.task</li>
<li>gulp.src</li>
<li>gulp.dest</li>
<li>gulp.watch</li>
</ul>
<h3 id="gulp-task-name-deps-fn"><a href="#gulp-task-name-deps-fn" class="headerlink" title="gulp.task(name [, deps] [, fn])"></a>gulp.task(name [, deps] [, fn])</h3><p>作用：定义各种不同的任务</p>
<ul>
<li>gulp.task(name, fn)</li>
<li>gulp.task(name, deps, fn)</li>
<li>gulp.task(name, fn(cb))</li>
<li>gulp.task(name, deps, fn(cb))</li>
</ul>
<p>一：普通任务</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'1 aaa'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">gulp.task(<span class="string">'b'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'2 bbb'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>二：任务之间的依赖</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">cb</span>) </span>&#123;</div><div class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'1 aaa'</span>)</div><div class="line">    cb()</div><div class="line">  &#125;, <span class="number">1000</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// b 任务依赖的 a 任务中的回调函数如果不调用，b 任务是不会执行的</span></div><div class="line">gulp.task(<span class="string">'b'</span>, [<span class="string">'a'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'2 bbb'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>三：gulp 流控制</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// 当任务中是一个 gulp 流的时候则需要通过 return 来保证依赖中的执行顺序</span></div><div class="line">  <span class="keyword">return</span> gulp.src()</div><div class="line">    .pipe()</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line">gulp.task(<span class="string">'b'</span>, [<span class="string">'a'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// doSomething</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="gulp-src-globs-options"><a href="#gulp-src-globs-options" class="headerlink" title="gulp.src(globs[, options])"></a>gulp.src(globs[, options])</h3><blockquote>
<p>gulp教程之gulp中文API：<a href="http://www.ydcss.com/archives/424" target="_blank" rel="external">http://www.ydcss.com/archives/424</a></p>
</blockquote>
<p>作用：根据路径（字符串或数组）读取需要构建的资源</p>
<h4 id="globs"><a href="#globs" class="headerlink" title="globs"></a>globs</h4><p>需要处理的源文件匹配符路径。</p>
<p>类型(必填)：String or StringArray，通配符路径匹配示例：</p>
<ul>
<li><code>src/a.js</code> 指定具体文件；</li>
<li><code>*</code> 匹配所有文件    例：<code>src/*.js</code> (包含src下的所有js文件)；</li>
<li><code>**</code> 匹配0个或多个子文件夹    例：<code>src/**/*.js</code> (包含src的0个或多个子文件夹下的js文件)；</li>
<li><code>{}</code> 匹配多个属性    例：<code>src/{a,b}.js</code> (包含a.js和b.js文件)  src/*.{jpg,png,gif}(src下的所有jpg/png/gif文件)；</li>
<li><code>!</code> 排除文件    例：<code>!src/a.js</code> (不包含src下的a.js文件)；</li>
</ul>
<h4 id="options-base"><a href="#options-base" class="headerlink" title="options.base"></a>options.base</h4><p>options.base：类型：String  设置输出路径以某个路径的某个组成部分为基础向后拼接，具体看下面示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">gulp.src(<span class="string">'client/js/**/*.js'</span>) </div><div class="line">  .pipe(minify())</div><div class="line">  .pipe(gulp.dest(<span class="string">'build'</span>))  <span class="comment">// Writes 'build/somedir/somefile.js'</span></div><div class="line"> </div><div class="line">gulp.src(<span class="string">'client/js/**/*.js'</span>, &#123; <span class="attr">base</span>: <span class="string">'client'</span> &#125;)</div><div class="line">  .pipe(minify())</div><div class="line">  .pipe(gulp.dest(<span class="string">'build'</span>))  <span class="comment">// Writes 'build/js/somedir/somefile.js'</span></div></pre></td></tr></table></figure>
<h3 id="gulp-dest-path-options"><a href="#gulp-dest-path-options" class="headerlink" title="gulp.dest(path[, options])"></a>gulp.dest(path[, options])</h3><p>作用：构建任务完成后资源存放的路径</p>
<h3 id="gulp-watch-glob-opts-tasks"><a href="#gulp-watch-glob-opts-tasks" class="headerlink" title="gulp.watch(glob[, opts], tasks)"></a>gulp.watch(glob[, opts], tasks)</h3><blockquote>
<p>监视指定资源的改动，然后可以调用响应的任务处理</p>
</blockquote>
<h3 id="gulp-watch-glob-opts-cb"><a href="#gulp-watch-glob-opts-cb" class="headerlink" title="gulp.watch(glob [, opts, cb])"></a>gulp.watch(glob [, opts, cb])</h3><hr>
<h2 id="常用插件"><a href="#常用插件" class="headerlink" title="常用插件"></a>常用插件</h2><table>
<thead>
<tr>
<th>插件名称</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>del</td>
<td>删除文件或文件夹</td>
</tr>
<tr>
<td>gulp-less</td>
<td>编译LESS文件</td>
</tr>
<tr>
<td>gulp-rname</td>
<td>重命名文件</td>
</tr>
<tr>
<td>gulp-imagemin</td>
<td>图片压缩</td>
</tr>
<tr>
<td>gulp-uglify</td>
<td>压缩Javascript</td>
</tr>
<tr>
<td>gulp-concat</td>
<td>合并 js 文件</td>
</tr>
<tr>
<td>gulp-concat-css</td>
<td>合并 css 文件</td>
</tr>
<tr>
<td>gulp-cssnano</td>
<td>压缩 css</td>
</tr>
<tr>
<td>gulp-htmlmin</td>
<td>压缩HTML</td>
</tr>
<tr>
<td>gulp-nunjucks</td>
<td>模板引擎</td>
</tr>
<tr>
<td>gulp-rev</td>
<td>添加版本号</td>
</tr>
<tr>
<td>gulp-rev-collector</td>
<td>内容替换</td>
</tr>
<tr>
<td>gulp-useref</td>
<td>gulp-if</td>
</tr>
<tr>
<td>gulp-load-plugins</td>
<td>依赖自动加载</td>
</tr>
<tr>
<td>gulp-useref</td>
<td>自动合并打包处理</td>
</tr>
<tr>
<td>gulp-wrap</td>
<td>包装内容</td>
</tr>
<tr>
<td>gulp-angular-templatecache</td>
<td>AngularJS 模板缓存</td>
</tr>
<tr>
<td>browser-sync</td>
<td>和 gulp 配合使用实现文件改变执行某个任务后自动刷新</td>
</tr>
<tr>
<td>yargs</td>
<td>获取命令行参数</td>
</tr>
<tr>
<td>gulp-if</td>
<td>根据判断条件执行某个插件</td>
</tr>
<tr>
<td>http-proxy-middleware</td>
<td>http 代理插件</td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table>
<h2 id="gulp-实战之：高级写页面"><a href="#gulp-实战之：高级写页面" class="headerlink" title="gulp 实战之：高级写页面"></a>gulp 实战之：高级写页面</h2><p>实现 HTML 模板功能，例如公共 HTML 头部和底部，提供可维护性，<br>以及实现 HTML 自动压缩，css 压缩，js 压缩，或者合并。</p>

        
      </div>
    </div>

  






          <div class="main-footer">
  
    © 2017 郎雪的博客 - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>
<script src="/scripts/main.js"></script>

</body>
</html>
